function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function n(e){return e&&e.__esModule?e.default:e}var r={},o={},i=t.parcelRequire344c;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequire344c=i),i.register("iQuBN",(function(t,n){var r,o;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>o),(e=>o=e));var i={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("f2jpS",(function(e,t){e.exports=i("03dyF")})),i.register("03dyF",(function(t,n){var r,o,a;e(t.exports,"Fragment",(()=>r),(e=>r=e)),e(t.exports,"jsx",(()=>o),(e=>o=e)),e(t.exports,"jsxs",(()=>a),(e=>a=e)),i("aGgxn");var s=i("49uSp"),u=60103;if(r=60107,"function"==typeof Symbol&&Symbol.for){var c=Symbol.for;u=c("react.element"),r=c("react.fragment")}var f=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function h(e,t,n){var r,o={},i=null,a=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)l.call(t,r)&&!p.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:u,type:e,key:i,ref:a,props:o,_owner:f.current}}o=h,a=h})),i.register("6jYnC",(function(n,r){var o,i;function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function l(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,n){return d=h()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&u(o,n.prototype),o},d.apply(null,arguments)}function v(e){var t="function"==typeof Map?new Map:void 0;return v=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)},v(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}e(n.exports,"Page",(()=>o)),e(n.exports,"default",(()=>Fp)),(i=o||(o={})).Settings="/settings",i.Identities="/settings/identities";var g=function(e){c(n,e);var t=y(n);function n(){return t.apply(this,arguments)}return s(n)}(v(Error)),m=function(e){c(n,e);var t=y(n);function n(e,n,r,o){var i;return(i=t.call(this,e)).name=n,i.reason=r,i.info=o,i}return s(n)}(g),w=function(e){c(n,e);var t=y(n);function n(e){var n,r=e.state,o=e.error,i=e.error_description,a=e.error_uri;return(n=t.call(this,o+(null!=i?": "+i:""))).state=r,n.error=o,n.error_description=i,n.error_uri=a,n}return s(n)}(g);function b(e){return null==e||e instanceof Error||"string"!=typeof e.name||"string"!=typeof e.reason||"string"!=typeof e.message?e instanceof Error?e:null!=e&&"string"==typeof e.message?new Error(e.message):null!=e&&"function"==typeof e.toString?new Error(e.toString()):new Error(String(e)):new m(e.message,e.name,e.reason,e.info)}function k(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){k(i,r,o,a,s,"next",e)}function s(e){k(i,r,o,a,s,"throw",e)}a(void 0)}))}}var _="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},S={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),a=new j(r||[]);return i._invoke=function(e,t,n){var r=l;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=f(e,t,n);if("normal"===u.type){if(r=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",p="suspendedYield",h="executing",d="completed",v={};function y(){}function g(){}function m(){}var w={};u(w,i,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var x=m.prototype=y.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function O(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function I(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:C}}function C(){return{value:t,done:!0}}return g.prototype=m,u(x,"constructor",m),u(m,"constructor",g),g.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(S.prototype),u(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(x),u(x,s,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;R(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(S);var O=S.exports,T=function(e){try{return!!e()}catch(e){return!0}},R={}.toString,j=function(e){return R.call(e).slice(8,-1)},I=j,C="".split,A=T((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==I(e)?C.call(e,""):Object(e)}:Object,E=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},U=A,L=E,P=function(e){return U(L(e))},D={},N=function(e){return e&&e.Math==Math&&e},B=N("object"==typeof globalThis&&globalThis)||N("object"==typeof window&&window)||N("object"==typeof self&&self)||N("object"==typeof _&&_)||Function("return this")(),q=!T((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),F={},H=function(e){return"object"==typeof e?null!==e:"function"==typeof e},K=H,M=B.document,z=K(M)&&K(M.createElement),Q=function(e){return z?M.createElement(e):{}},V=Q,G=!q&&!T((function(){return 7!=Object.defineProperty(V("div"),"a",{get:function(){return 7}}).a})),J=H,Y=function(e){if(!J(e))throw TypeError(String(e)+" is not an object");return e},W=H,Z=function(e,t){if(!W(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!W(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!W(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!W(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},$=q,X=G,ee=Y,te=Z,ne=Object.defineProperty;F.f=$?ne:function(e,t,n){if(ee(e),t=te(t,!0),ee(n),X)try{return ne(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var re=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},oe=F,ie=re,ae=q?function(e,t,n){return oe.f(e,t,ie(1,n))}:function(e,t,n){return e[t]=n,e},se=B,ue=ae,ce=function(e,t){try{ue(se,e,t)}catch(n){se[e]=t}return t},fe="__core-js_shared__",le=B["__core-js_shared__"]||ce(fe,{}),pe=le,he=Function.toString;"function"!=typeof pe.inspectSource&&(pe.inspectSource=function(e){return he.call(e)});var de=pe.inspectSource,ve=B.WeakMap,ye="function"==typeof ve&&/native code/.test(de(ve)),ge={}.hasOwnProperty,me=function(e,t){return ge.call(e,t)},we={exports:{}},be=le;(we.exports=function(e,t){return be[e]||(be[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:"pure",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"});var ke,xe,_e,Se=0,Oe=Math.random(),Te=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Se+Oe).toString(36)},Re=we.exports,je=Te,Ie=Re("keys"),Ce=function(e){return Ie[e]||(Ie[e]=je(e))},Ae={},Ee=ye,Ue=H,Le=ae,Pe=me,De=Ce,Ne=Ae,Be=B.WeakMap;if(Ee){var qe=new Be,Fe=qe.get,He=qe.has,Ke=qe.set;ke=function(e,t){return Ke.call(qe,e,t),t},xe=function(e){return Fe.call(qe,e)||{}},_e=function(e){return He.call(qe,e)}}else{var Me=De("state");Ne[Me]=!0,ke=function(e,t){return Le(e,Me,t),t},xe=function(e){return Pe(e,Me)?e[Me]:{}},_e=function(e){return Pe(e,Me)}}var ze={set:ke,get:xe,has:_e,enforce:function(e){return _e(e)?xe(e):ke(e,{})},getterFor:function(e){return function(t){var n;if(!Ue(t)||(n=xe(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Qe={},Ve={},Ge={}.propertyIsEnumerable,Je=Object.getOwnPropertyDescriptor,Ye=Je&&!Ge.call({1:2},1);Ve.f=Ye?function(e){var t=Je(this,e);return!!t&&t.enumerable}:Ge;var We=q,Ze=Ve,$e=re,Xe=P,et=Z,tt=me,nt=G,rt=Object.getOwnPropertyDescriptor;Qe.f=We?rt:function(e,t){if(e=Xe(e),t=et(t,!0),nt)try{return rt(e,t)}catch(e){}if(tt(e,t))return $e(!Ze.f.call(e,t),e[t])};var ot=T,it=/#|\.prototype\./,at=function(e,t){var n=ut[st(e)];return n==ft||n!=ct&&("function"==typeof t?ot(t):!!t)},st=at.normalize=function(e){return String(e).replace(it,".").toLowerCase()},ut=at.data={},ct=at.NATIVE="N",ft=at.POLYFILL="P",lt=at,pt={},ht=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},dt=function(e,t,n){if(ht(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},vt=B,yt=Qe.f,gt=lt,mt=pt,wt=dt,bt=ae,kt=me,xt=function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t},_t=function(e,t){var n,r,o,i,a,s,u,c,f=e.target,l=e.global,p=e.stat,h=e.proto,d=l?vt:p?vt[f]:(vt[f]||{}).prototype,v=l?mt:mt[f]||(mt[f]={}),y=v.prototype;for(o in t)n=!gt(l?o:f+(p?".":"#")+o,e.forced)&&d&&kt(d,o),a=v[o],n&&(s=e.noTargetGet?(c=yt(d,o))&&c.value:d[o]),i=n&&s?s:t[o],n&&typeof a==typeof i||(u=e.bind&&n?wt(i,vt):e.wrap&&n?xt(i):h&&"function"==typeof i?wt(Function.call,i):i,(e.sham||i&&i.sham||a&&a.sham)&&bt(u,"sham",!0),v[o]=u,h&&(kt(mt,r=f+"Prototype")||bt(mt,r,{}),mt[r][o]=i,e.real&&y&&!y[o]&&bt(y,o,i)))},St=E,Ot=function(e){return Object(St(e))},Tt=!T((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Rt=me,jt=Ot,It=Tt,Ct=Ce("IE_PROTO"),At=Object.prototype,Et=It?Object.getPrototypeOf:function(e){return e=jt(e),Rt(e,Ct)?e[Ct]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?At:null},Ut=T,Lt=!!Object.getOwnPropertySymbols&&!Ut((function(){return!String(Symbol())})),Pt=Lt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Dt=B,Nt=we.exports,Bt=me,qt=Te,Ft=Lt,Ht=Pt,Kt=Nt("wks"),Mt=Dt.Symbol,zt=Ht?Mt:Mt&&Mt.withoutSetter||qt,Qt=function(e){return Bt(Kt,e)||(Ft&&Bt(Mt,e)?Kt[e]=Mt[e]:Kt[e]=zt("Symbol."+e)),Kt[e]},Vt=Et;Qt("iterator");var Gt,Jt,Yt,Wt=!1;[].keys&&("next"in(Yt=[].keys())?(Jt=Vt(Vt(Yt)))!==Object.prototype&&(Gt=Jt):Wt=!0),null==Gt&&(Gt={});var Zt,$t={IteratorPrototype:Gt,BUGGY_SAFARI_ITERATORS:Wt},Xt=Math.ceil,en=Math.floor,tn=function(e){return isNaN(e=+e)?0:(e>0?en:Xt)(e)},nn=tn,rn=Math.min,on=function(e){return e>0?rn(nn(e),9007199254740991):0},an=tn,sn=Math.max,un=Math.min,cn=P,fn=on,ln=function(e,t){var n=an(e);return n<0?sn(n+t,0):un(n,t)},pn=function(e){return function(t,n,r){var o,i=cn(t),a=fn(i.length),s=ln(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},hn={includes:pn(!0),indexOf:pn(!1)},dn=me,vn=P,yn=hn.indexOf,gn=Ae,mn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wn=function(e,t){var n,r=vn(e),o=0,i=[];for(n in r)!dn(gn,n)&&dn(r,n)&&i.push(n);for(;t.length>o;)dn(r,n=t[o++])&&(~yn(i,n)||i.push(n));return i},bn=mn,kn=Object.keys||function(e){return wn(e,bn)},xn=F,_n=Y,Sn=kn,On=q?Object.defineProperties:function(e,t){_n(e);for(var n,r=Sn(t),o=r.length,i=0;o>i;)xn.f(e,n=r[i++],t[n]);return e},Tn=pt,Rn=B,jn=function(e){return"function"==typeof e?e:void 0},In=function(e,t){return arguments.length<2?jn(Tn[e])||jn(Rn[e]):Tn[e]&&Tn[e][t]||Rn[e]&&Rn[e][t]},Cn=In("document","documentElement"),An=Y,En=On,Un=mn,Ln=Ae,Pn=Cn,Dn=Q,Nn=Ce("IE_PROTO"),Bn=function(){},qn=function(e){return"<script>"+e+"</"+"script>"},Fn=function(){try{Zt=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;Fn=Zt?function(e){e.write(qn("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Zt):((t=Dn("iframe")).style.display="none",Pn.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(qn("document.F=Object")),e.close(),e.F);for(var n=Un.length;n--;)delete Fn.prototype[Un[n]];return Fn()};Ln[Nn]=!0;var Hn=Object.create||function(e,t){var n;return null!==e?(Bn.prototype=An(e),n=new Bn,Bn.prototype=null,n[Nn]=e):n=Fn(),void 0===t?n:En(n,t)},Kn={};Kn[Qt("toStringTag")]="z";var Mn="[object z]"===String(Kn),zn=Mn,Qn=j,Vn=Qt("toStringTag"),Gn="Arguments"==Qn(function(){return arguments}()),Jn=zn?Qn:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Vn))?n:Gn?Qn(t):"Object"==(r=Qn(t))&&"function"==typeof t.callee?"Arguments":r},Yn=Jn,Wn=Mn?{}.toString:function(){return"[object "+Yn(this)+"]"},Zn=Mn,$n=F.f,Xn=ae,er=me,tr=Wn,nr=Qt("toStringTag"),rr=function(e,t,n,r){if(e){var o=n?e:e.prototype;er(o,nr)||$n(o,nr,{configurable:!0,value:t}),r&&!Zn&&Xn(o,"toString",tr)}},or=$t.IteratorPrototype,ir=Hn,ar=re,sr=rr,ur=D,cr=function(){return this},fr=function(e,t,n){var r=t+" Iterator";return e.prototype=ir(or,{next:ar(1,n)}),sr(e,r,!1,!0),ur[r]=cr,e};Object.setPrototypeOf||"__proto__"in{}&&function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}}();var lr=ae,pr=function(e,t,n,r){r&&r.enumerable?e[t]=n:lr(e,t,n)},hr=_t,dr=fr,vr=Et,yr=rr,gr=ae,mr=pr,wr=D,br=$t.IteratorPrototype,kr=$t.BUGGY_SAFARI_ITERATORS,xr=Qt("iterator"),_r="keys",Sr="values",Or="entries",Tr=function(){return this},Rr=function(e,t,n,r,o,i,a){dr(n,t,r);var s,u,c,f=function(e){if(e===o&&v)return v;if(!kr&&e in h)return h[e];switch(e){case _r:case Sr:case Or:return function(){return new n(this,e)}}return function(){return new n(this)}},l=t+" Iterator",p=!1,h=e.prototype,d=h[xr]||h["@@iterator"]||o&&h[o],v=!kr&&d||f(o),y="Array"==t&&h.entries||d;if(y&&(s=vr(y.call(new e)),br!==Object.prototype&&s.next&&(yr(s,l,!0,!0),wr[l]=Tr)),o==Sr&&d&&d.name!==Sr&&(p=!0,v=function(){return d.call(this)}),a&&h[xr]!==v&&gr(h,xr,v),wr[t]=v,o)if(u={values:f(Sr),keys:i?v:f(_r),entries:f(Or)},a)for(c in u)(kr||p||!(c in h))&&mr(h,c,u[c]);else hr({target:t,proto:!0,forced:kr||p},u);return u},jr=P,Ir=D,Cr=ze,Ar=Rr,Er="Array Iterator",Ur=Cr.set,Lr=Cr.getterFor(Er);Ar(Array,"Array",(function(e,t){Ur(this,{type:Er,target:jr(e),index:0,kind:t})}),(function(){var e=Lr(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),Ir.Arguments=Ir.Array;var Pr=T,Dr=Qt("iterator"),Nr=!Pr((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Dr]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),Br=pr,qr=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Fr=Jn,Hr=D,Kr=Qt("iterator"),Mr=function(e){if(null!=e)return e[Kr]||e["@@iterator"]||Hr[Fr(e)]},zr=Y,Qr=Mr,Vr=_t,Gr=In,Jr=Nr,Yr=pr,Wr=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Br(e,r,t[r],n);return e},Zr=rr,$r=fr,Xr=ze,eo=qr,to=me,no=dt,ro=Jn,oo=Y,io=H,ao=Hn,so=re,uo=function(e){var t=Qr(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return zr(t.call(e))},co=Mr,fo=Qt,lo=Gr("fetch"),po=Gr("Headers"),ho=fo("iterator"),vo="URLSearchParams",yo="URLSearchParamsIterator",go=Xr.set,mo=Xr.getterFor(vo),wo=Xr.getterFor(yo),bo=/\+/g,ko=Array(4),xo=function(e){return ko[e-1]||(ko[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},_o=function(e){try{return decodeURIComponent(e)}catch(t){return e}},So=function(e){var t=e.replace(bo," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(xo(n--),_o);return t}},Oo=/[!'()~]|%20/g,To={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Ro=function(e){return To[e]},jo=function(e){return encodeURIComponent(e).replace(Oo,Ro)},Io=function(e,t){if(t)for(var n,r,o=t.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split("="),e.push({key:So(r.shift()),value:So(r.join("="))}))},Co=function(e){this.entries.length=0,Io(this.entries,e)},Ao=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Eo=$r((function(e,t){go(this,{type:yo,iterator:uo(mo(e).entries),kind:t})}),"Iterator",(function(){var e=wo(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),Uo=function(){eo(this,Uo,vo);var e,t,n,r,o,i,a,s,u,c=arguments.length>0?arguments[0]:void 0,f=this,l=[];if(go(f,{type:vo,entries:l,updateURL:function(){},updateSearchParams:Co}),void 0!==c)if(io(c))if("function"==typeof(e=co(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((a=(i=(o=uo(oo(r.value))).next).call(o)).done||(s=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");l.push({key:a.value+"",value:s.value+""})}else for(u in c)to(c,u)&&l.push({key:u,value:c[u]+""});else Io(l,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},Lo=Uo.prototype;Wr(Lo,{append:function(e,t){Ao(arguments.length,2);var n=mo(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Ao(arguments.length,1);for(var t=mo(this),n=t.entries,r=e+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;t.updateURL()},get:function(e){Ao(arguments.length,1);for(var t=mo(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Ao(arguments.length,1);for(var t=mo(this).entries,n=e+"",r=[],o=0;o<t.length;o++)t[o].key===n&&r.push(t[o].value);return r},has:function(e){Ao(arguments.length,1);for(var t=mo(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Ao(arguments.length,1);for(var n,r=mo(this),o=r.entries,i=!1,a=e+"",s=t+"",u=0;u<o.length;u++)(n=o[u]).key===a&&(i?o.splice(u--,1):(i=!0,n.value=s));i||o.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n,r=mo(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(e=i[n],t=0;t<n;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===n&&o.push(e)}r.updateURL()},forEach:function(e){for(var t,n=mo(this).entries,r=no(e,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new Eo(this,"keys")},values:function(){return new Eo(this,"values")},entries:function(){return new Eo(this,"entries")}},{enumerable:!0}),Yr(Lo,ho,Lo.entries),Yr(Lo,"toString",(function(){for(var e,t=mo(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(jo(e.key)+"="+jo(e.value));return n.join("&")}),{enumerable:!0}),Zr(Uo,vo),Vr({global:!0,forced:!Jr},{URLSearchParams:Uo}),Jr||"function"!=typeof lo||"function"!=typeof po||Vr({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,o=[e];return arguments.length>1&&(io(t=arguments[1])&&(n=t.body,ro(n)===vo&&((r=t.headers?new po(t.headers):new po).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=ao(t,{body:so(0,String(n)),headers:so(0,r)}))),o.push(t)),lo.apply(this,o)}});var Po={URLSearchParams:Uo,getState:mo},Do=pt.URLSearchParams;var No=function(){function e(){}var t=e.prototype;return t._prepareHeaders=function(){var e=x(O.mark((function e(){var t,n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},null!=(r=null==(t=this._delegate)?void 0:t.getAccessToken())&&(n.authorization="Bearer ".concat(r)),null!=this.userAgent&&(n["user-agent"]=this.userAgent),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._fetchWithoutRefresh=function(){var e=x(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._fetchFunction){e.next=2;break}throw new g("missing fetchFunction in api client");case 2:if(this._requestClass){e.next=4;break}throw new g("missing requestClass in api client");case 4:return r=new this._requestClass(t,n),e.abrupt("return",this._fetchFunction(r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.fetch=function(){var e=x(O.mark((function e(t,n){var r,o,i,a,s;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._fetchFunction){e.next=2;break}throw new g("missing fetchFunction in api client");case 2:if(null!=this._requestClass){e.next=4;break}throw new g("missing requestClass in api client");case 4:if(null!=this._delegate){e.next=6;break}throw new g("missing delegate in api client");case 6:if(!this._delegate.shouldRefreshAccessToken()){e.next=10;break}return e.next=10,this._delegate.refreshAccessToken();case 10:return r=new this._requestClass(t,n),e.next=13,this._prepareHeaders();case 13:for(o=e.sent,i=0,a=Object.keys(o);i<a.length;i++)s=a[i],r.headers.set(s,o[s]);return e.abrupt("return",this._fetchFunction(r));case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t._requestJSON=function(){var e=x(O.mark((function e(t,n,r){var o,i,a,s,u;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.json,i=r.query,a=r.credentials,s={},null!=o&&(s["content-type"]="application/json"),u=null!=o?JSON.stringify(o):void 0,e.abrupt("return",this._request(t,n,{headers:s,query:i,body:u,credentials:a}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),t._request=function(){var e=x(O.mark((function e(t,n,r){var o,i,a,s,u,c,f,l,p,h,d;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.endpoint){e.next=2;break}throw new g("missing endpoint in api client");case 2:if(o=this.endpoint,i=r.headers,a=r.query,s=r.body,u=r.credentials,c=n,null!=a&&a.length>0){for(f=new Do,l=0;l<a.length;++l)f.append(a[l][0],a[l][1]);c+="?"+f.toString()}return p=o+"/"+c.replace(/^\//,""),e.next=9,this.fetch(p,{method:t,headers:null!=i?i:{},mode:"cors",credentials:u,body:s});case 9:return h=e.sent,e.prev=10,e.next=13,h.json();case 13:d=e.sent,e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(10),!(h.status<200||h.status>=300)){e.next=22;break}throw new m("unexpected status code","InternalError","UnexpectedError",{status_code:h.status});case 22:throw new m("failed to decode response JSON","InternalError","UnexpectedError");case 23:if(!d.result){e.next=27;break}return e.abrupt("return",d.result);case 27:if(!d.error){e.next=29;break}throw b(d.error);case 29:throw b(void 0);case 30:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t,n,r){return e.apply(this,arguments)}}(),t._post=function(){var e=x(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._requestJSON("POST",t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t._fetchOIDCRequest=function(){var e=x(O.mark((function e(t,n){var r,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchWithoutRefresh(t,n);case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",r);case 5:return e.prev=5,e.next=8,r.json();case 8:o=e.sent,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new m("failed to decode response JSON","InternalError","UnexpectedError",{status_code:r.status});case 14:throw new w({error:o.error,error_description:o.error_description});case 15:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t,n){return e.apply(this,arguments)}}(),t._fetchOIDCJSON=function(){var e=x(O.mark((function e(t,n){var r,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchOIDCRequest(t,n);case 2:return r=e.sent,e.prev=3,e.next=6,r.json();case 6:o=e.sent,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(3),new m("failed to decode response JSON","InternalError","UnexpectedError");case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}(),t._fetchOIDCConfiguration=function(){var e=x(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.endpoint){e.next=2;break}throw new g("missing endpoint in api client");case 2:if(t=this.endpoint,this._config){e.next=7;break}return e.next=6,this._fetchOIDCJSON("".concat(t,"/.well-known/openid-configuration"));case 6:this._config=e.sent;case 7:return e.abrupt("return",this._config);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._oidcTokenRequest=function(){var e=x(O.mark((function e(t){var n,r,o,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchOIDCConfiguration();case 2:return n=e.sent,(r=new Do).append("grant_type",t.grant_type),r.append("client_id",t.client_id),t.code&&r.append("code",t.code),t.redirect_uri&&r.append("redirect_uri",t.redirect_uri),t.code_verifier&&r.append("code_verifier",t.code_verifier),t.refresh_token&&r.append("refresh_token",t.refresh_token),t.jwt&&r.append("jwt",t.jwt),t.x_device_info&&r.append("x_device_info",t.x_device_info),o={"content-type":"application/x-www-form-urlencoded"},i="include",null!=t.access_token&&(o.authorization="Bearer ".concat(t.access_token),i="omit"),e.abrupt("return",this._fetchOIDCJSON(n.token_endpoint,{method:"POST",headers:o,body:r.toString(),mode:"cors",credentials:i}));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._setupBiometricRequest=function(){var e=x(O.mark((function e(t){var n,r,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchOIDCConfiguration();case 2:return n=e.sent,r={authorization:"Bearer ".concat(t.access_token),"content-type":"application/x-www-form-urlencoded"},(o=new Do).append("grant_type","urn:authgear:params:oauth:grant-type:biometric-request"),o.append("client_id",t.client_id),o.append("jwt",t.jwt),e.next=10,this._fetchOIDCRequest(n.token_endpoint,{method:"POST",headers:r,body:o.toString()});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._oidcUserInfoRequest=function(){var e=x(O.mark((function e(t){var n,r,o,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r="include",void 0!==t&&(n.authorization="Bearer ".concat(t),r="omit"),e.next=5,this._fetchOIDCConfiguration();case 5:return o=e.sent,e.next=8,this._fetchOIDCJSON(o.userinfo_endpoint,{method:"GET",headers:n,mode:"cors",credentials:r});case 8:return i=e.sent,e.abrupt("return",(s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,p=void 0,h=void 0,d=void 0,v=void 0,y=void 0,g=void 0,m=void 0,g=a=i,m=null!=(s=a.custom_attributes)?s:{},{sub:a.sub,isVerified:null!=(u=a["https://authgear.com/claims/user/is_verified"])&&u,isAnonymous:null!=(c=a["https://authgear.com/claims/user/is_anonymous"])&&c,canReauthenticate:null!=(f=a["https://authgear.com/claims/user/can_reauthenticate"])&&f,raw:g,customAttributes:m,email:a.email,emailVerified:a.email_verified,phoneNumber:a.phone_number,phoneNumberVerified:a.phone_number_verified,preferredUsername:a.preferred_username,familyName:a.family_name,givenName:a.given_name,middleName:a.middle_name,name:a.name,nickname:a.nickname,picture:a.picture,profile:a.profile,website:a.website,gender:a.gender,birthdate:a.birthdate,zoneinfo:a.zoneinfo,locale:a.locale,address:{formatted:null==(l=a.address)?void 0:l.formatted,streetAddress:null==(p=a.address)?void 0:p.street_address,locality:null==(h=a.address)?void 0:h.locality,region:null==(d=a.address)?void 0:d.region,postalCode:null==(v=a.address)?void 0:v.postal_code,country:null==(y=a.address)?void 0:y.country}}));case 10:case"end":return e.stop()}var a,s,u,c,f,l,p,h,d,v,y,g,m}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._oidcRevocationRequest=function(){var e=x(O.mark((function e(t){var n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchOIDCConfiguration();case 2:return n=e.sent,r=new Do({token:t}),e.next=6,this._fetchOIDCRequest(n.revocation_endpoint,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:r.toString()});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._wechatAuthCallbackRequest=function(){var e=x(O.mark((function e(t,n,r){var o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new Do({code:t,state:n,x_platform:r}),e.next=3,this._request("POST","/sso/wechat/callback",{credentials:"omit",headers:{"content-type":"application/x-www-form-urlencoded"},body:o.toString()});case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),t.appSessionToken=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._post("/oauth2/app_session_token",{credentials:"omit",json:{refresh_token:t}}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.oauthChallenge=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._post("/oauth2/challenge",{credentials:"omit",json:{purpose:t}}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.signupAnonymousUserWithoutKey=function(){var e=x(O.mark((function e(t,n,r){var o,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={client_id:t,session_type:n},r&&(o.refresh_token=r),e.next=4,this._post("/api/anonymous_user/signup",{json:o,credentials:"cookie"===n?"include":"omit"});case 4:if(i=e.sent,0!==Object.keys(i).length){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),t.anonymousUserPromotionCode=function(){var e=x(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={session_type:t},n&&(r.refresh_token=n),e.abrupt("return",this._post("/api/anonymous_user/promotion_code",{json:r,credentials:"cookie"===t?"include":"omit"}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),s(e,[{key:"endpoint",get:function(){return this._endpoint},set:function(e){this._endpoint=null!=e?e.replace(/\/+$/g,""):void 0}}]),e}();function Bo(){return Bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bo.apply(this,arguments)}var qo=tn,Fo=E,Ho=function(e){return function(t,n){var r,o,i=String(Fo(t)),a=qo(n),s=i.length;return a<0||a>=s?e?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):r:e?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},Ko={codeAt:Ho(!1),charAt:Ho(!0)},Mo=Ko.charAt,zo=ze,Qo=Rr,Vo="String Iterator",Go=zo.set,Jo=zo.getterFor(Vo);Qo(String,"String",(function(e){Go(this,{type:Vo,string:String(e),index:0})}),(function(){var e,t=Jo(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Mo(n,r),t.index+=e.length,{value:e,done:!1})}));var Yo={};Yo.f=Object.getOwnPropertySymbols;var Wo,Zo=q,$o=T,Xo=kn,ei=Yo,ti=Ve,ni=Ot,ri=A,oi=Object.assign,ii=Object.defineProperty,ai=!oi||$o((function(){if(Zo&&1!==oi({b:1},oi(ii({},"a",{enumerable:!0,get:function(){ii(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=oi({},e)[n]||Xo(oi({},t)).join("")!=r}))?function(e,t){for(var n=ni(e),r=arguments.length,o=1,i=ei.f,a=ti.f;r>o;)for(var s,u=ri(arguments[o++]),c=i?Xo(u).concat(i(u)):Xo(u),f=c.length,l=0;f>l;)s=c[l++],Zo&&!a.call(u,s)||(n[s]=u[s]);return n}:oi,si=Y,ui=D,ci=Qt("iterator"),fi=Array.prototype,li=Z,pi=F,hi=re,di=dt,vi=Ot,yi=function(e,t,n,r){try{return r?t(si(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&si(o.call(e)),t}},gi=function(e){return void 0!==e&&(ui.Array===e||fi[ci]===e)},mi=on,wi=function(e,t,n){var r=li(t);r in e?pi.f(e,r,hi(0,n)):e[r]=n},bi=Mr,ki=2147483647,xi=/[^\0-\u007E]/,_i=/[.\u3002\uFF0E\uFF61]/g,Si="Overflow: input needs wider integers to process",Oi=Math.floor,Ti=String.fromCharCode,Ri=function(e){return e+22+75*(e<26)},ji=function(e,t,n){var r=0;for(e=n?Oi(e/700):e>>1,e+=Oi(e/t);e>455;r+=36)e=Oi(e/35);return Oi(r+36*e/(e+38))},Ii=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t}(e);var n,r,o=e.length,i=128,a=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&t.push(Ti(r));var u=t.length,c=u;for(u&&t.push("-");c<o;){var f=ki;for(n=0;n<e.length;n++)(r=e[n])>=i&&r<f&&(f=r);var l=c+1;if(f-i>Oi((ki-a)/l))throw RangeError(Si);for(a+=(f-i)*l,i=f,n=0;n<e.length;n++){if((r=e[n])<i&&++a>ki)throw RangeError(Si);if(r==i){for(var p=a,h=36;;h+=36){var d=h<=s?1:h>=s+26?26:h-s;if(p<d)break;var v=p-d,y=36-d;t.push(Ti(Ri(d+v%y))),p=Oi(v/y)}t.push(Ti(Ri(p))),s=ji(a,l,c==u),a=0,++c}}++a,++i}return t.join("")},Ci=_t,Ai=q,Ei=Nr,Ui=On,Li=pr,Pi=qr,Di=me,Ni=ai,Bi=function(e){var t,n,r,o,i,a,s=vi(e),u="function"==typeof this?this:Array,c=arguments.length,f=c>1?arguments[1]:void 0,l=void 0!==f,p=bi(s),h=0;if(l&&(f=di(f,c>2?arguments[2]:void 0,2)),null==p||u==Array&&gi(p))for(n=new u(t=mi(s.length));t>h;h++)a=l?f(s[h],h):s[h],wi(n,h,a);else for(i=(o=p.call(s)).next,n=new u;!(r=i.call(o)).done;h++)a=l?yi(o,f,[r.value,h],!0):r.value,wi(n,h,a);return n.length=h,n},qi=Ko.codeAt,Fi=function(e){var t,n,r=[],o=e.toLowerCase().replace(_i,".").split(".");for(t=0;t<o.length;t++)n=o[t],r.push(xi.test(n)?"xn--"+Ii(n):n);return r.join(".")},Hi=rr,Ki=Po,Mi=ze,zi=B.URL,Qi=Ki.URLSearchParams,Vi=Ki.getState,Gi=Mi.set,Ji=Mi.getterFor("URL"),Yi=Math.floor,Wi=Math.pow,Zi="Invalid scheme",$i="Invalid host",Xi="Invalid port",ea=/[A-Za-z]/,ta=/[\d+-.A-Za-z]/,na=/\d/,ra=/^(0x|0X)/,oa=/^[0-7]+$/,ia=/^\d+$/,aa=/^[\dA-Fa-f]+$/,sa=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ua=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ca=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,fa=/[\u0009\u000A\u000D]/g,la=function(e,t){var n,r,o;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return $i;if(!(n=ha(t.slice(1,-1))))return $i;e.host=n}else if(ka(e)){if(t=Fi(t),sa.test(t))return $i;if(null===(n=pa(t)))return $i;e.host=n}else{if(ua.test(t))return $i;for(n="",r=Bi(t),o=0;o<r.length;o++)n+=wa(r[o],va);e.host=n}},pa=function(e){var t,n,r,o,i,a,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(o=u[r]))return e;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=ra.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?ia:8==i?oa:aa).test(o))return e;a=parseInt(o,i)}n.push(a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=Wi(256,5-t))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*Wi(256,3-r);return s},ha=function(e){var t,n,r,o,i,a,s,u=[0,0,0,0,0,0,0,0],c=0,f=null,l=0,p=function(){return e.charAt(l)};if(":"==p()){if(":"!=e.charAt(1))return;l+=2,f=++c}for(;p();){if(8==c)return;if(":"!=p()){for(t=n=0;n<4&&aa.test(p());)t=16*t+parseInt(p(),16),l++,n++;if("."==p()){if(0==n)return;if(l-=n,c>6)return;for(r=0;p();){if(o=null,r>0){if(!("."==p()&&r<4))return;l++}if(!na.test(p()))return;for(;na.test(p());){if(i=parseInt(p(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;l++}u[c]=256*u[c]+o,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==p()){if(l++,!p())return}else if(p())return;u[c++]=t}else{if(null!==f)return;l++,f=++c}}if(null!==f)for(a=c-f,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[f+a-1],u[f+--a]=s;else if(8!=c)return;return u},da=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=Yi(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(t=r,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},va={},ya=Ni({},va,{" ":1,'"':1,"<":1,">":1,"`":1}),ga=Ni({},ya,{"#":1,"?":1,"{":1,"}":1}),ma=Ni({},ga,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),wa=function(e,t){var n=qi(e,0);return n>32&&n<127&&!Di(t,e)?e:encodeURIComponent(e)},ba={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ka=function(e){return Di(ba,e.scheme)},xa=function(e){return""!=e.username||""!=e.password},_a=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Sa=function(e,t){var n;return 2==e.length&&ea.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Oa=function(e){var t;return e.length>1&&Sa(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Ta=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Sa(t[0],!0)||t.pop()},Ra=function(e){return"."===e||"%2e"===e.toLowerCase()},ja={},Ia={},Ca={},Aa={},Ea={},Ua={},La={},Pa={},Da={},Na={},Ba={},qa={},Fa={},Ha={},Ka={},Ma={},za={},Qa={},Va={},Ga={},Ja={},Ya=function(e,t,n,r){var o,i,a,s,u,c=n||ja,f=0,l="",p=!1,h=!1,d=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(ca,"")),t=t.replace(fa,""),o=Bi(t);f<=o.length;){switch(i=o[f],c){case ja:if(!i||!ea.test(i)){if(n)return Zi;c=Ca;continue}l+=i.toLowerCase(),c=Ia;break;case Ia:if(i&&(ta.test(i)||"+"==i||"-"==i||"."==i))l+=i.toLowerCase();else{if(":"!=i){if(n)return Zi;l="",c=Ca,f=0;continue}if(n&&(ka(e)!=Di(ba,l)||"file"==l&&(xa(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=l,n)return void(ka(e)&&ba[e.scheme]==e.port&&(e.port=null));l="","file"==e.scheme?c=Ha:ka(e)&&r&&r.scheme==e.scheme?c=Aa:ka(e)?c=Pa:"/"==o[f+1]?(c=Ea,f++):(e.cannotBeABaseURL=!0,e.path.push(""),c=Va)}break;case Ca:if(!r||r.cannotBeABaseURL&&"#"!=i)return Zi;if(r.cannotBeABaseURL&&"#"==i){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,c=Ja;break}c="file"==r.scheme?Ha:Ua;continue;case Aa:if("/"!=i||"/"!=o[f+1]){c=Ua;continue}c=Da,f++;break;case Ea:if("/"==i){c=Na;break}c=Qa;continue;case Ua:if(e.scheme=r.scheme,i==Wo)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==i||"\\"==i&&ka(e))c=La;else if("?"==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",c=Ga;else{if("#"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),c=Qa;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",c=Ja}break;case La:if(!ka(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,c=Qa;continue}c=Na}else c=Da;break;case Pa:if(c=Da,"/"!=i||"/"!=l.charAt(f+1))continue;f++;break;case Da:if("/"!=i&&"\\"!=i){c=Na;continue}break;case Na:if("@"==i){p&&(l="%40"+l),p=!0,a=Bi(l);for(var v=0;v<a.length;v++){var y=a[v];if(":"!=y||d){var g=wa(y,ma);d?e.password+=g:e.username+=g}else d=!0}l=""}else if(i==Wo||"/"==i||"?"==i||"#"==i||"\\"==i&&ka(e)){if(p&&""==l)return"Invalid authority";f-=Bi(l).length+1,l="",c=Ba}else l+=i;break;case Ba:case qa:if(n&&"file"==e.scheme){c=Ma;continue}if(":"!=i||h){if(i==Wo||"/"==i||"?"==i||"#"==i||"\\"==i&&ka(e)){if(ka(e)&&""==l)return $i;if(n&&""==l&&(xa(e)||null!==e.port))return;if(s=la(e,l))return s;if(l="",c=za,n)return;continue}"["==i?h=!0:"]"==i&&(h=!1),l+=i}else{if(""==l)return $i;if(s=la(e,l))return s;if(l="",c=Fa,n==qa)return}break;case Fa:if(!na.test(i)){if(i==Wo||"/"==i||"?"==i||"#"==i||"\\"==i&&ka(e)||n){if(""!=l){var m=parseInt(l,10);if(m>65535)return Xi;e.port=ka(e)&&m===ba[e.scheme]?null:m,l=""}if(n)return;c=za;continue}return Xi}l+=i;break;case Ha:if(e.scheme="file","/"==i||"\\"==i)c=Ka;else{if(!r||"file"!=r.scheme){c=Qa;continue}if(i==Wo)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==i)e.host=r.host,e.path=r.path.slice(),e.query="",c=Ga;else{if("#"!=i){Oa(o.slice(f).join(""))||(e.host=r.host,e.path=r.path.slice(),Ta(e)),c=Qa;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",c=Ja}}break;case Ka:if("/"==i||"\\"==i){c=Ma;break}r&&"file"==r.scheme&&!Oa(o.slice(f).join(""))&&(Sa(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),c=Qa;continue;case Ma:if(i==Wo||"/"==i||"\\"==i||"?"==i||"#"==i){if(!n&&Sa(l))c=Qa;else if(""==l){if(e.host="",n)return;c=za}else{if(s=la(e,l))return s;if("localhost"==e.host&&(e.host=""),n)return;l="",c=za}continue}l+=i;break;case za:if(ka(e)){if(c=Qa,"/"!=i&&"\\"!=i)continue}else if(n||"?"!=i)if(n||"#"!=i){if(i!=Wo&&(c=Qa,"/"!=i))continue}else e.fragment="",c=Ja;else e.query="",c=Ga;break;case Qa:if(i==Wo||"/"==i||"\\"==i&&ka(e)||!n&&("?"==i||"#"==i)){if(".."===(u=(u=l).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(Ta(e),"/"==i||"\\"==i&&ka(e)||e.path.push("")):Ra(l)?"/"==i||"\\"==i&&ka(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Sa(l)&&(e.host&&(e.host=""),l=l.charAt(0)+":"),e.path.push(l)),l="","file"==e.scheme&&(i==Wo||"?"==i||"#"==i))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==i?(e.query="",c=Ga):"#"==i&&(e.fragment="",c=Ja)}else l+=wa(i,ga);break;case Va:"?"==i?(e.query="",c=Ga):"#"==i?(e.fragment="",c=Ja):i!=Wo&&(e.path[0]+=wa(i,va));break;case Ga:n||"#"!=i?i!=Wo&&("'"==i&&ka(e)?e.query+="%27":e.query+="#"==i?"%23":wa(i,va)):(e.fragment="",c=Ja);break;case Ja:i!=Wo&&(e.fragment+=wa(i,ya))}f++}},Wa=function(e){var t,n,r=Pi(this,Wa,"URL"),o=arguments.length>1?arguments[1]:void 0,i=String(e),a=Gi(r,{type:"URL"});if(void 0!==o)if(o instanceof Wa)t=Ji(o);else if(n=Ya(t={},String(o)))throw TypeError(n);if(n=Ya(a,i,null,t))throw TypeError(n);var s=a.searchParams=new Qi,u=Vi(s);u.updateSearchParams(a.query),u.updateURL=function(){a.query=String(s)||null},Ai||(r.href=$a.call(r),r.origin=Xa.call(r),r.protocol=es.call(r),r.username=ts.call(r),r.password=ns.call(r),r.host=rs.call(r),r.hostname=os.call(r),r.port=is.call(r),r.pathname=as.call(r),r.search=ss.call(r),r.searchParams=us.call(r),r.hash=cs.call(r))},Za=Wa.prototype,$a=function(){var e=Ji(this),t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==o?(c+="//",xa(e)&&(c+=n+(r?":"+r:"")+"@"),c+=da(o),null!==i&&(c+=":"+i)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Xa=function(){var e=Ji(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&ka(e)?t+"://"+da(e.host)+(null!==n?":"+n:""):"null"},es=function(){return Ji(this).scheme+":"},ts=function(){return Ji(this).username},ns=function(){return Ji(this).password},rs=function(){var e=Ji(this),t=e.host,n=e.port;return null===t?"":null===n?da(t):da(t)+":"+n},os=function(){var e=Ji(this).host;return null===e?"":da(e)},is=function(){var e=Ji(this).port;return null===e?"":String(e)},as=function(){var e=Ji(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},ss=function(){var e=Ji(this).query;return e?"?"+e:""},us=function(){return Ji(this).searchParams},cs=function(){var e=Ji(this).fragment;return e?"#"+e:""},fs=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(Ai&&Ui(Za,{href:fs($a,(function(e){var t=Ji(this),n=String(e),r=Ya(t,n);if(r)throw TypeError(r);Vi(t.searchParams).updateSearchParams(t.query)})),origin:fs(Xa),protocol:fs(es,(function(e){var t=Ji(this);Ya(t,String(e)+":",ja)})),username:fs(ts,(function(e){var t=Ji(this),n=Bi(String(e));if(!_a(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=wa(n[r],ma)}})),password:fs(ns,(function(e){var t=Ji(this),n=Bi(String(e));if(!_a(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=wa(n[r],ma)}})),host:fs(rs,(function(e){var t=Ji(this);t.cannotBeABaseURL||Ya(t,String(e),Ba)})),hostname:fs(os,(function(e){var t=Ji(this);t.cannotBeABaseURL||Ya(t,String(e),qa)})),port:fs(is,(function(e){var t=Ji(this);_a(t)||(""==(e=String(e))?t.port=null:Ya(t,e,Fa))})),pathname:fs(as,(function(e){var t=Ji(this);t.cannotBeABaseURL||(t.path=[],Ya(t,e+"",za))})),search:fs(ss,(function(e){var t=Ji(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ya(t,e,Ga)),Vi(t.searchParams).updateSearchParams(t.query)})),searchParams:fs(us),hash:fs(cs,(function(e){var t=Ji(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ya(t,e,Ja)):t.fragment=null}))}),Li(Za,"toJSON",(function(){return $a.call(this)}),{enumerable:!0}),Li(Za,"toString",(function(){return $a.call(this)}),{enumerable:!0}),zi){var ls=zi.createObjectURL,ps=zi.revokeObjectURL;ls&&Li(Wa,"createObjectURL",(function(e){return ls.apply(zi,arguments)})),ps&&Li(Wa,"revokeObjectURL",(function(e){return ps.apply(zi,arguments)}))}Hi(Wa,"URL"),Ci({global:!0,forced:!Ei,sham:!Ai},{URL:Wa});var hs,ds,vs=pt.URL;function ys(e){return ds(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),n=0;n<e.length;n++)t[e.charCodeAt(n)]=n;ds=function(t){var n,r=new Uint8Array(t),o=r.length,i="";for(n=0;n<o;n+=3)i+=e[r[n]>>2],i+=e[(3&r[n])<<4|r[n+1]>>4],i+=e[(15&r[n+1])<<2|r[n+2]>>6],i+=e[63&r[n+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},hs=function(e){var n,r,o,i,a,s=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var f=new ArrayBuffer(s),l=new Uint8Array(f);for(n=0;n<u;n+=4)r=t[e.charCodeAt(n)],o=t[e.charCodeAt(n+1)],i=t[e.charCodeAt(n+2)],a=t[e.charCodeAt(n+3)],l[c++]=r<<2|o>>4,l[c++]=(15&o)<<4|i>>2,l[c++]=(3&i)<<6|63&a;return f}}();var gs={exports:{}};function ms(e){return(new gs.exports.TextEncoder).encode(e)}!function(e,t){e.exports=function(){var e=void 0!==_?_:self;if(void 0!==e.TextEncoder&&void 0!==e.TextDecoder)return{TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder};var t=["utf8","utf-8","unicode-1-1-utf-8"];return{TextEncoder:function(e){if(t.indexOf(e)<0&&null!=e)throw new RangeError("Invalid encoding type. Only utf-8 is supported");this.encoding="utf-8",this.encode=function(e){if("string"!=typeof e)throw new TypeError("passed argument must be of type string");var t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);return t.split("").forEach((function(e,t){n[t]=e.charCodeAt(0)})),n}},TextDecoder:function(e,n){if(t.indexOf(e)<0&&null!=e)throw new RangeError("Invalid encoding type. Only utf-8 is supported");if(this.encoding="utf-8",this.ignoreBOM=!1,this.fatal=void 0!==n&&"fatal"in n&&n.fatal,"boolean"!=typeof this.fatal)throw new TypeError("fatal flag must be boolean");this.decode=function(e,t){if(void 0===e)return"";if("boolean"!=typeof(void 0!==t&&"stream"in t&&t.stream))throw new TypeError("stream option must be boolean");if(ArrayBuffer.isView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=new Array(n.length);return n.forEach((function(e,t){r[t]=String.fromCharCode(e)})),decodeURIComponent(escape(r.join("")))}throw new TypeError("passed argument must be an array buffer view")}}}}()}(gs);function ws(e){if(null!=e){var t=e.split(".");if(3===t.length){var n,r=t[1],o=hs(r.replace(/-/g,"+").replace(/_/g,"/")),i=(n=new Uint8Array(o),(new gs.exports.TextDecoder).decode(n));return JSON.parse(i)}}}var bs=function(){function e(e,t,n){var r;this.name=null!=(r=e.name)?r:"default",this.apiClient=t,this.sessionState="UNKNOWN",this._delegate=n}var t=e.prototype;return t.getIDTokenHint=function(){return this.idToken},t.canReauthenticate=function(){var e,t=ws(this.idToken);return null!=t&&("boolean"==typeof(e=t["https://authgear.com/claims/user/can_reauthenticate"])&&e)},t.getAuthTime=function(){var e=ws(this.idToken);if(null!=e)return function(e){var t=e.auth_time;if("number"==typeof t)return new Date(1e3*t)}(e)},t._persistTokenResponse=function(){var e=x(O.mark((function e(t,n){var r,o,i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id_token,o=t.access_token,i=t.refresh_token,a=t.expires_in,null!=o&&null!=a){e.next=3;break}throw new g("access_token or expires_in missing in Token Response");case 3:if(null!=r&&(this.idToken=r),this.accessToken=o,i&&(this.refreshToken=i),this.expireAt=new Date(new Date(Date.now()).getTime()+.9*a*1e3),this._updateSessionState("AUTHENTICATED",n),!i){e.next=11;break}return e.next=11,this._delegate.tokenStorage.setRefreshToken(this.name,i);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t._clearSession=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._delegate.tokenStorage.delRefreshToken(this.name);case 2:this.idToken=void 0,this.accessToken=void 0,this.refreshToken=void 0,this.expireAt=void 0,this._updateSessionState("NO_SESSION",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.refreshAccessTokenIfNeeded=function(){var e=x(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldRefreshAccessToken()){e.next=3;break}return e.next=3,this._delegate.refreshAccessToken();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.clearSessionState=function(){var e=x(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._clearSession("CLEAR");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.shouldRefreshAccessToken=function(){if(null==this.refreshToken)return!1;if(null==this.accessToken)return!0;if(null==this.expireAt)return!0;var e=new Date(Date.now());return this.expireAt.getTime()<e.getTime()},t.fetch=function(){var e=x(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.fetch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t._refreshAccessToken=function(){var e=x(O.mark((function e(t){var n,r,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.clientID)){e.next=3;break}throw new g("missing client ID");case 3:return e.next=5,this._delegate.tokenStorage.getRefreshToken(this.name);case 5:if(null!=(r=e.sent)){e.next=10;break}return e.next=9,this._clearSession("NO_TOKEN");case 9:case 21:return e.abrupt("return");case 10:return e.prev=10,e.next=13,this.apiClient._oidcTokenRequest(Bo({},t,{grant_type:"refresh_token",client_id:n,refresh_token:r}));case 13:o=e.sent,e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(10),null==e.t0||"invalid_grant"!==e.t0.error){e.next=22;break}return e.next=21,this._clearSession("INVALID");case 22:throw e.t0;case 23:return e.next=25,this._persistTokenResponse(o,"FOUND_TOKEN");case 25:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t){return e.apply(this,arguments)}}(),t.refreshIDToken=function(){var e=x(O.mark((function e(){var t,n,r,o,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=this.clientID)){e.next=3;break}throw new g("missing client ID");case 3:return e.next=5,this.refreshAccessTokenIfNeeded();case 5:return n=this.accessToken,r={grant_type:"urn:authgear:params:oauth:grant-type:id-token",client_id:t,access_token:n},e.next=9,this.apiClient._oidcTokenRequest(r);case 9:o=e.sent,null!=(i=o.id_token)&&(this.idToken=i);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.authorizeEndpoint=function(){var e=x(O.mark((function e(t){var n,r,o,i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.clientID)){e.next=3;break}throw new g("missing client ID");case 3:return e.next=5,this.apiClient._fetchOIDCConfiguration();case 5:if(r=e.sent,o=new Do,i=t.responseType,o.append("response_type",i),"code"!==i){e.next=17;break}return e.next=12,this._delegate._setupCodeVerifier();case 12:return a=e.sent,e.next=15,this._delegate.storage.setOIDCCodeVerifier(this.name,a.verifier);case 15:o.append("code_challenge_method","S256"),o.append("code_challenge",a.challenge);case 17:return o.append("scope",t.scope.join(" ")),o.append("client_id",n),o.append("redirect_uri",t.redirectURI),null!=t.state&&o.append("state",t.state),null!=t.prompt&&("string"==typeof t.prompt?o.append("prompt",t.prompt):t.prompt.length>0&&o.append("prompt",t.prompt.join(" "))),null!=t.loginHint&&o.append("login_hint",t.loginHint),null!=t.uiLocales&&o.append("ui_locales",t.uiLocales.join(" ")),null!=t.colorScheme&&o.append("x_color_scheme",t.colorScheme),null!=t.idTokenHint&&o.append("id_token_hint",t.idTokenHint),null!=t.maxAge&&o.append("max_age",String(t.maxAge)),null!=t.wechatRedirectURI&&o.append("x_wechat_redirect_uri",t.wechatRedirectURI),null!=t.platform&&o.append("x_platform",t.platform),null!=t.page&&o.append("x_page",t.page),!0===t.suppressIDPSessionCookie&&o.append("x_suppress_idp_session_cookie","true"),null!=t.oauthProviderAlias&&o.append("x_oauth_provider_alias",t.oauthProviderAlias),e.abrupt("return","".concat(r.authorization_endpoint,"?").concat(o.toString()));case 33:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._finishAuthentication=function(){var e=x(O.mark((function e(t,n){var r,o,i,a,s,u,c,f,l,p,h;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(o=this.clientID)){e.next=3;break}throw new g("missing client ID");case 3:if(i=new vs(t),a=i.searchParams,(s=new vs(t)).hash="",s.search="",u=s.toString(),!a.get("error")){e.next=11;break}throw new w({error:a.get("error"),error_description:null!=(c=a.get("error_description"))?c:void 0});case 11:if(a.has("code")){e.next=17;break}return e.next=14,this.apiClient._oidcUserInfoRequest();case 14:f=e.sent,e.next=29;break;case 17:if(p=a.get("code")){e.next=20;break}throw new w({error:"invalid_request",error_description:"Missing parameter: code"});case 20:return e.next=22,this._delegate.storage.getOIDCCodeVerifier(this.name);case 22:return h=e.sent,e.next=25,this.apiClient._oidcTokenRequest(Bo({},n,{grant_type:"authorization_code",code:p,redirect_uri:u,client_id:o,code_verifier:null!=h?h:""}));case 25:return l=e.sent,e.next=28,this.apiClient._oidcUserInfoRequest(l.access_token);case 28:f=e.sent;case 29:if(!l){e.next=32;break}return e.next=32,this._persistTokenResponse(l,"AUTHENTICATED");case 32:return e.abrupt("return",{userInfo:f,state:null!=(r=a.get("state"))?r:void 0});case 33:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t._finishReauthentication=function(){var e=x(O.mark((function e(t,n){var r,o,i,a,s,u,c,f,l,p,h,d,v;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(o=this.clientID)){e.next=3;break}throw new g("missing client ID");case 3:if(i=new vs(t),a=i.searchParams,(s=new vs(t)).hash="",s.search="",u=s.toString(),!a.get("error")){e.next=11;break}throw new w({error:a.get("error"),error_description:null!=(c=a.get("error_description"))?c:void 0});case 11:if(f=a.get("code")){e.next=14;break}throw new w({error:"invalid_request",error_description:"Missing parameter: code"});case 14:return e.next=16,this._delegate.storage.getOIDCCodeVerifier(this.name);case 16:return l=e.sent,e.next=19,this.apiClient._oidcTokenRequest(Bo({},n,{grant_type:"authorization_code",code:f,redirect_uri:u,client_id:o,code_verifier:null!=l?l:""}));case 19:return p=e.sent,h=p.id_token,d=p.access_token,e.next=24,this.apiClient._oidcUserInfoRequest(d);case 24:return v=e.sent,null!=h&&(this.idToken=h),e.abrupt("return",{userInfo:v,state:null!=(r=a.get("state"))?r:void 0});case 27:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t._updateSessionState=function(e,t){this.sessionState=e,this._delegate.onSessionStateChange(t)},s(e)}(),ks=function(){function e(){}var t=e.prototype;return t.scopedKey=function(e){return"authgear_".concat(e)},t.keyRefreshToken=function(e){return"".concat(this.scopedKey(e),"_refreshToken")},t.keyOIDCCodeVerifier=function(e){return"".concat(this.scopedKey(e),"_oidcCodeVerifier")},t.keyAnonymousKeyID=function(e){return"".concat(this.scopedKey(e),"_anonymousKeyID")},t.keyBiometricKeyID=function(e){return"".concat(this.scopedKey(e),"_biometricKeyID")},s(e)}(),xs=function(){function e(e){this.driver=e}var t=e.prototype;return t.del=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.driver.del(t);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),t.get=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.driver.get(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),t.set=function(){var e=x(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.driver.set(t,n);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),s(e)}(),_s=("1.0.1",function(e){try{return!!e()}catch(e){return!0}}),Ss={}.toString,Os=function(e){return Ss.call(e).slice(8,-1)},Ts=Os,Rs="".split,js=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},Is=_s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==Ts(e)?Rs.call(e,""):Object(e)}:Object,Cs=js,As=function(e){return Is(Cs(e))},Es={},Us=function(e){return e&&e.Math==Math&&e},Ls=Us("object"==typeof globalThis&&globalThis)||Us("object"==typeof window&&window)||Us("object"==typeof self&&self)||Us("object"==typeof _&&_)||Function("return this")(),Ps=!_s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Ds={},Ns=function(e){return"object"==typeof e?null!==e:"function"==typeof e},Bs=Ns,qs=Ls.document,Fs=Bs(qs)&&Bs(qs.createElement),Hs=function(e){return Fs?qs.createElement(e):{}},Ks=Hs,Ms=!Ps&&!_s((function(){return 7!=Object.defineProperty(Ks("div"),"a",{get:function(){return 7}}).a})),zs=Ns,Qs=function(e){if(!zs(e))throw TypeError(String(e)+" is not an object");return e},Vs=Ns,Gs=function(e,t){if(!Vs(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!Vs(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!Vs(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!Vs(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},Js=Ps,Ys=Ms,Ws=Qs,Zs=Gs,$s=Object.defineProperty;Ds.f=Js?$s:function(e,t,n){if(Ws(e),t=Zs(t,!0),Ws(n),Ys)try{return $s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Xs=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},eu=Ds,tu=Xs,nu=Ps?function(e,t,n){return eu.f(e,t,tu(1,n))}:function(e,t,n){return e[t]=n,e},ru=Ls,ou=nu,iu=function(e,t){try{ou(ru,e,t)}catch(n){ru[e]=t}return t},au="__core-js_shared__",su=Ls["__core-js_shared__"]||iu(au,{}),uu=su,cu=Function.toString;"function"!=typeof uu.inspectSource&&(uu.inspectSource=function(e){return cu.call(e)});var fu=uu.inspectSource,lu=Ls.WeakMap,pu="function"==typeof lu&&/native code/.test(fu(lu)),hu={}.hasOwnProperty,du=function(e,t){return hu.call(e,t)},vu={exports:{}},yu=su;(vu.exports=function(e,t){return yu[e]||(yu[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:"pure",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"});var gu,mu,wu,bu=0,ku=Math.random(),xu=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++bu+ku).toString(36)},_u=vu.exports,Su=xu,Ou=_u("keys"),Tu=function(e){return Ou[e]||(Ou[e]=Su(e))},Ru={},ju=pu,Iu=Ns,Cu=nu,Au=du,Eu=Tu,Uu=Ru,Lu=Ls.WeakMap;if(ju){var Pu=new Lu,Du=Pu.get,Nu=Pu.has,Bu=Pu.set;gu=function(e,t){return Bu.call(Pu,e,t),t},mu=function(e){return Du.call(Pu,e)||{}},wu=function(e){return Nu.call(Pu,e)}}else{var qu=Eu("state");Uu[qu]=!0,gu=function(e,t){return Cu(e,qu,t),t},mu=function(e){return Au(e,qu)?e[qu]:{}},wu=function(e){return Au(e,qu)}}var Fu={set:gu,get:mu,has:wu,enforce:function(e){return wu(e)?mu(e):gu(e,{})},getterFor:function(e){return function(t){var n;if(!Iu(t)||(n=mu(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Hu={},Ku={},Mu={}.propertyIsEnumerable,zu=Object.getOwnPropertyDescriptor,Qu=zu&&!Mu.call({1:2},1);Ku.f=Qu?function(e){var t=zu(this,e);return!!t&&t.enumerable}:Mu;var Vu=Ps,Gu=Ku,Ju=Xs,Yu=As,Wu=Gs,Zu=du,$u=Ms,Xu=Object.getOwnPropertyDescriptor;Hu.f=Vu?Xu:function(e,t){if(e=Yu(e),t=Wu(t,!0),$u)try{return Xu(e,t)}catch(e){}if(Zu(e,t))return Ju(!Gu.f.call(e,t),e[t])};var ec=_s,tc=/#|\.prototype\./,nc=function(e,t){var n=oc[rc(e)];return n==ac||n!=ic&&("function"==typeof t?ec(t):!!t)},rc=nc.normalize=function(e){return String(e).replace(tc,".").toLowerCase()},oc=nc.data={},ic=nc.NATIVE="N",ac=nc.POLYFILL="P",sc=nc,uc={},cc=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},fc=function(e,t,n){if(cc(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},lc=Ls,pc=Hu.f,hc=sc,dc=uc,vc=fc,yc=nu,gc=du,mc=function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t},wc=function(e,t){var n,r,o,i,a,s,u,c,f=e.target,l=e.global,p=e.stat,h=e.proto,d=l?lc:p?lc[f]:(lc[f]||{}).prototype,v=l?dc:dc[f]||(dc[f]={}),y=v.prototype;for(o in t)n=!hc(l?o:f+(p?".":"#")+o,e.forced)&&d&&gc(d,o),a=v[o],n&&(s=e.noTargetGet?(c=pc(d,o))&&c.value:d[o]),i=n&&s?s:t[o],n&&typeof a==typeof i||(u=e.bind&&n?vc(i,lc):e.wrap&&n?mc(i):h&&"function"==typeof i?vc(Function.call,i):i,(e.sham||i&&i.sham||a&&a.sham)&&yc(u,"sham",!0),v[o]=u,h&&(gc(dc,r=f+"Prototype")||yc(dc,r,{}),dc[r][o]=i,e.real&&y&&!y[o]&&yc(y,o,i)))},bc=js,kc=!_s((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),xc=du,_c=function(e){return Object(bc(e))},Sc=kc,Oc=Tu("IE_PROTO"),Tc=Object.prototype,Rc=Sc?Object.getPrototypeOf:function(e){return e=_c(e),xc(e,Oc)?e[Oc]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Tc:null},jc=_s,Ic=!!Object.getOwnPropertySymbols&&!jc((function(){return!String(Symbol())})),Cc=Ic&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ac=Ls,Ec=vu.exports,Uc=du,Lc=xu,Pc=Ic,Dc=Cc,Nc=Ec("wks"),Bc=Ac.Symbol,qc=Dc?Bc:Bc&&Bc.withoutSetter||Lc,Fc=function(e){return Uc(Nc,e)||(Pc&&Uc(Bc,e)?Nc[e]=Bc[e]:Nc[e]=qc("Symbol."+e)),Nc[e]},Hc=Rc;Fc("iterator");var Kc,Mc,zc,Qc=!1;[].keys&&("next"in(zc=[].keys())?(Mc=Hc(Hc(zc)))!==Object.prototype&&(Kc=Mc):Qc=!0),null==Kc&&(Kc={});var Vc,Gc={IteratorPrototype:Kc,BUGGY_SAFARI_ITERATORS:Qc},Jc=Math.ceil,Yc=Math.floor,Wc=function(e){return isNaN(e=+e)?0:(e>0?Yc:Jc)(e)},Zc=Wc,$c=Math.min,Xc=Wc,ef=Math.max,tf=Math.min,nf=As,rf=function(e){return e>0?$c(Zc(e),9007199254740991):0},of=function(e,t){var n=Xc(e);return n<0?ef(n+t,0):tf(n,t)},af=function(e){return function(t,n,r){var o,i=nf(t),a=rf(i.length),s=of(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},sf={includes:af(!0),indexOf:af(!1)},uf=du,cf=As,ff=sf.indexOf,lf=Ru,pf=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],hf=function(e,t){var n,r=cf(e),o=0,i=[];for(n in r)!uf(lf,n)&&uf(r,n)&&i.push(n);for(;t.length>o;)uf(r,n=t[o++])&&(~ff(i,n)||i.push(n));return i},df=pf,vf=Object.keys||function(e){return hf(e,df)},yf=Ds,gf=Qs,mf=vf,wf=Ps?Object.defineProperties:function(e,t){gf(e);for(var n,r=mf(t),o=r.length,i=0;o>i;)yf.f(e,n=r[i++],t[n]);return e},bf=uc,kf=Ls,xf=function(e){return"function"==typeof e?e:void 0},_f=function(e,t){return arguments.length<2?xf(bf[e])||xf(kf[e]):bf[e]&&bf[e][t]||kf[e]&&kf[e][t]},Sf=_f("document","documentElement"),Of=Qs,Tf=wf,Rf=pf,jf=Ru,If=Sf,Cf=Hs,Af=Tu("IE_PROTO"),Ef=function(){},Uf=function(e){return"<script>"+e+"</"+"script>"},Lf=function(){try{Vc=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;Lf=Vc?function(e){e.write(Uf("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Vc):((t=Cf("iframe")).style.display="none",If.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Uf("document.F=Object")),e.close(),e.F);for(var n=Rf.length;n--;)delete Lf.prototype[Rf[n]];return Lf()};jf[Af]=!0;var Pf=Object.create||function(e,t){var n;return null!==e?(Ef.prototype=Of(e),n=new Ef,Ef.prototype=null,n[Af]=e):n=Lf(),void 0===t?n:Tf(n,t)},Df={};Df[Fc("toStringTag")]="z";var Nf="[object z]"===String(Df),Bf=Nf,qf=Os,Ff=Fc("toStringTag"),Hf="Arguments"==qf(function(){return arguments}()),Kf=Bf?qf:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Ff))?n:Hf?qf(t):"Object"==(r=qf(t))&&"function"==typeof t.callee?"Arguments":r},Mf=Kf,zf=Nf?{}.toString:function(){return"[object "+Mf(this)+"]"},Qf=Nf,Vf=Ds.f,Gf=nu,Jf=du,Yf=zf,Wf=Fc("toStringTag"),Zf=function(e,t,n,r){if(e){var o=n?e:e.prototype;Jf(o,Wf)||Vf(o,Wf,{configurable:!0,value:t}),r&&!Qf&&Gf(o,"toString",Yf)}},$f=Gc.IteratorPrototype,Xf=Pf,el=Xs,tl=Zf,nl=Es,rl=function(){return this},ol=function(e,t,n){var r=t+" Iterator";return e.prototype=Xf($f,{next:el(1,n)}),tl(e,r,!1,!0),nl[r]=rl,e};Object.setPrototypeOf||"__proto__"in{}&&function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}}();var il=nu,al=function(e,t,n,r){r&&r.enumerable?e[t]=n:il(e,t,n)},sl=wc,ul=ol,cl=Rc,fl=Zf,ll=nu,pl=al,hl=Es,dl=Gc.IteratorPrototype,vl=Gc.BUGGY_SAFARI_ITERATORS,yl=Fc("iterator"),gl="keys",ml="values",wl="entries",bl=function(){return this},kl=As,xl=Es,_l=Fu,Sl=function(e,t,n,r,o,i,a){ul(n,t,r);var s,u,c,f=function(e){if(e===o&&v)return v;if(!vl&&e in h)return h[e];switch(e){case gl:case ml:case wl:return function(){return new n(this,e)}}return function(){return new n(this)}},l=t+" Iterator",p=!1,h=e.prototype,d=h[yl]||h["@@iterator"]||o&&h[o],v=!vl&&d||f(o),y="Array"==t&&h.entries||d;if(y&&(s=cl(y.call(new e)),dl!==Object.prototype&&s.next&&(fl(s,l,!0,!0),hl[l]=bl)),o==ml&&d&&d.name!==ml&&(p=!0,v=function(){return d.call(this)}),a&&h[yl]!==v&&ll(h,yl,v),hl[t]=v,o)if(u={values:f(ml),keys:i?v:f(gl),entries:f(wl)},a)for(c in u)(vl||p||!(c in h))&&pl(h,c,u[c]);else sl({target:t,proto:!0,forced:vl||p},u);return u},Ol="Array Iterator",Tl=_l.set,Rl=_l.getterFor(Ol);Sl(Array,"Array",(function(e,t){Tl(this,{type:Ol,target:kl(e),index:0,kind:t})}),(function(){var e=Rl(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),xl.Arguments=xl.Array;var jl=_s,Il=Fc("iterator"),Cl=!jl((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Il]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),Al=al,El=Kf,Ul=Es,Ll=Fc("iterator"),Pl=function(e){if(null!=e)return e[Ll]||e["@@iterator"]||Ul[El(e)]},Dl=Qs,Nl=Pl,Bl=wc,ql=_f,Fl=Cl,Hl=al,Kl=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Al(e,r,t[r],n);return e},Ml=Zf,zl=ol,Ql=Fu,Vl=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Gl=du,Jl=fc,Yl=Kf,Wl=Qs,Zl=Ns,$l=Pf,Xl=Xs,ep=function(e){var t=Nl(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return Dl(t.call(e))},tp=Pl,np=Fc,rp=ql("fetch"),op=ql("Headers"),ip=np("iterator"),ap="URLSearchParams",sp="URLSearchParamsIterator",up=Ql.set,cp=Ql.getterFor(ap),fp=Ql.getterFor(sp),lp=/\+/g,pp=Array(4),hp=function(e){return pp[e-1]||(pp[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},dp=function(e){try{return decodeURIComponent(e)}catch(t){return e}},vp=function(e){var t=e.replace(lp," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(hp(n--),dp);return t}},yp=/[!'()~]|%20/g,gp={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},mp=function(e){return gp[e]},wp=function(e){return encodeURIComponent(e).replace(yp,mp)},bp=function(e,t){if(t)for(var n,r,o=t.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split("="),e.push({key:vp(r.shift()),value:vp(r.join("="))}))},kp=function(e){this.entries.length=0,bp(this.entries,e)},xp=function(e,t){if(e<t)throw TypeError("Not enough arguments")},_p=zl((function(e,t){up(this,{type:sp,iterator:ep(cp(e).entries),kind:t})}),"Iterator",(function(){var e=fp(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),Sp=function(){Vl(this,Sp,ap);var e,t,n,r,o,i,a,s,u,c=arguments.length>0?arguments[0]:void 0,f=this,l=[];if(up(f,{type:ap,entries:l,updateURL:function(){},updateSearchParams:kp}),void 0!==c)if(Zl(c))if("function"==typeof(e=tp(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((a=(i=(o=ep(Wl(r.value))).next).call(o)).done||(s=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");l.push({key:a.value+"",value:s.value+""})}else for(u in c)Gl(c,u)&&l.push({key:u,value:c[u]+""});else bp(l,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},Op=Sp.prototype;Kl(Op,{append:function(e,t){xp(arguments.length,2);var n=cp(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){xp(arguments.length,1);for(var t=cp(this),n=t.entries,r=e+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;t.updateURL()},get:function(e){xp(arguments.length,1);for(var t=cp(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){xp(arguments.length,1);for(var t=cp(this).entries,n=e+"",r=[],o=0;o<t.length;o++)t[o].key===n&&r.push(t[o].value);return r},has:function(e){xp(arguments.length,1);for(var t=cp(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){xp(arguments.length,1);for(var n,r=cp(this),o=r.entries,i=!1,a=e+"",s=t+"",u=0;u<o.length;u++)(n=o[u]).key===a&&(i?o.splice(u--,1):(i=!0,n.value=s));i||o.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n,r=cp(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(e=i[n],t=0;t<n;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===n&&o.push(e)}r.updateURL()},forEach:function(e){for(var t,n=cp(this).entries,r=Jl(e,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new _p(this,"keys")},values:function(){return new _p(this,"values")},entries:function(){return new _p(this,"entries")}},{enumerable:!0}),Hl(Op,ip,Op.entries),Hl(Op,"toString",(function(){for(var e,t=cp(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(wp(e.key)+"="+wp(e.value));return n.join("&")}),{enumerable:!0}),Ml(Sp,ap),Bl({global:!0,forced:!Fl},{URLSearchParams:Sp}),Fl||"function"!=typeof rp||"function"!=typeof op||Bl({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,o=[e];return arguments.length>1&&(Zl(t=arguments[1])&&(n=t.body,Yl(n)===ap&&((r=t.headers?new op(t.headers):new op).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=$l(t,{body:Xl(0,String(n)),headers:Xl(0,r)}))),o.push(t)),rp.apply(this,o)}});var Tp=uc.URLSearchParams;function Rp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}var jp=function(e){c(n,e);var t=Rp(n);function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fetchFunction=window.fetch.bind(window),e._requestClass=Request,e}return s(n)}(No),Ip={get:function(e){return x(O.mark((function t(){return O.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.localStorage.getItem(e));case 1:case"end":return t.stop()}}),t)})))()},set:function(e,t){return x(O.mark((function n(){return O.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:window.localStorage.setItem(e,t);case 1:case"end":return n.stop()}}),n)})))()},del:function(e){return x(O.mark((function t(){return O.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.localStorage.removeItem(e);case 1:case"end":return t.stop()}}),t)})))()}},Cp=function(){function e(){this.keyMaker=new ks,this.storageDriver=new xs(Ip)}var t=e.prototype;return t.setRefreshToken=function(){var e=x(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageDriver.set(this.keyMaker.keyRefreshToken(t),n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.getRefreshToken=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storageDriver.get(this.keyMaker.keyRefreshToken(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.delRefreshToken=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageDriver.del(this.keyMaker.keyRefreshToken(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s(e)}(),Ap=function(){function e(){this.keyMaker=new ks,this.storageDriver=new xs(Ip)}var t=e.prototype;return t.setOIDCCodeVerifier=function(){var e=x(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageDriver.set(this.keyMaker.keyOIDCCodeVerifier(t),n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.setAnonymousKeyID=function(){var e=x(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageDriver.set(this.keyMaker.keyAnonymousKeyID(t),n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.setBiometricKeyID=function(){var e=x(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageDriver.set(this.keyMaker.keyBiometricKeyID(t),n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.getOIDCCodeVerifier=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storageDriver.get(this.keyMaker.keyOIDCCodeVerifier(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getAnonymousKeyID=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storageDriver.get(this.keyMaker.keyAnonymousKeyID(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getBiometricKeyID=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storageDriver.get(this.keyMaker.keyBiometricKeyID(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.delOIDCCodeVerifier=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageDriver.del(this.keyMaker.keyOIDCCodeVerifier(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.delAnonymousKeyID=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageDriver.del(this.keyMaker.keyAnonymousKeyID(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.delBiometricKeyID=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageDriver.del(this.keyMaker.keyBiometricKeyID(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s(e)}();function Ep(e,t){return Up.apply(this,arguments)}function Up(){return(Up=x(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=window.crypto.subtle.digest(t,n.buffer)).then){e.next=3;break}return e.abrupt("return",r.then((function(e){return new Uint8Array(e)})));case 3:return e.abrupt("return",new Promise((function(e,t){r.oncomplete=function(t){e(new Uint8Array(t))},r.onerror=function(e){t(e)}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lp(e){return Pp.apply(this,arguments)}function Pp(){return(Pp=x(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ms(t),e.abrupt("return",Ep("SHA-256",n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dp(e){return Np.apply(this,arguments)}function Np(){return(Np=x(O.mark((function e(t){var n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lp(t);case 2:return n=e.sent,r=ys(n),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bp(){var e=new Uint8Array(32);window.crypto.getRandomValues(e);for(var t="",n=0;n<e.length;++n)t+=("0"+e[n].toString(16)).substr(-2);return t}var qp=function(){function e(e){var t=Bo({},e),n=new jp;this.baseContainer=new bs(t,n,this),this.baseContainer.apiClient._delegate=this,this.storage=new Ap,this.tokenStorage=new Cp,this.sessionType="refresh_token"}var t=e.prototype;return t.getAccessToken=function(){return this.baseContainer.accessToken},t.shouldRefreshAccessToken=function(){return this.baseContainer.shouldRefreshAccessToken()},t.onSessionStateChange=function(e){var t;null==(t=this.delegate)||t.onSessionStateChange(this,e)},t.getIDTokenHint=function(){return this.baseContainer.getIDTokenHint()},t.canReauthenticate=function(){return this.baseContainer.canReauthenticate()},t.getAuthTime=function(){return this.baseContainer.getAuthTime()},t.refreshIDToken=function(){var e=x(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshAccessTokenIfNeeded();case 2:return e.abrupt("return",this.baseContainer.refreshIDToken());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.configure=function(){var e=x(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenStorage.getRefreshToken(this.name);case 2:n=e.sent,this.clientID=t.clientID,this.baseContainer.apiClient.endpoint=t.endpoint,null!=t.sessionType&&(this.sessionType=t.sessionType),this.baseContainer.refreshToken=null!=n?n:void 0,e.t0=this.sessionType,e.next="cookie"===e.t0?10:"refresh_token"===e.t0?12:14;break;case 10:return this.baseContainer._updateSessionState("UNKNOWN","NO_TOKEN"),e.abrupt("break",14);case 12:return null!=this.baseContainer.refreshToken?this.baseContainer._updateSessionState("AUTHENTICATED","FOUND_TOKEN"):this.baseContainer._updateSessionState("NO_SESSION","NO_TOKEN"),e.abrupt("break",14);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._setupCodeVerifier=function(){var e=x(O.mark((function e(){var t,n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Bp(),e.next=3,Dp(t);case 3:return n=e.sent,e.abrupt("return",{verifier:t,challenge:n});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.startAuthentication=function(){var e=x(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorizeEndpoint(t);case 2:n=e.sent,window.location.href=n;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.startReauthentication=function(){var e=x(O.mark((function e(t){var n,r,o,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=this.getIDTokenHint())&&this.canReauthenticate()){e.next=3;break}throw new Error("You can only trigger reauthentication when canReauthenticate() returns true");case 3:return o=null!=(n=t.maxAge)?n:0,e.next=6,this.baseContainer.authorizeEndpoint(Bo({},t,{maxAge:o,idTokenHint:r,responseType:"code",scope:["openid","https://authgear.com/scopes/full-access"]}));case 6:i=e.sent,window.location.href=i;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.startPromoteAnonymousUser=function(){var e=x(O.mark((function e(t){var n,r,o,i,a,s;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("cookie"!==this.sessionType){e.next=4;break}e.t0=void 0,e.next=13;break;case 4:return e.next=6,this.tokenStorage.getRefreshToken(this.name);case 6:if(e.t1=n=e.sent,null==e.t1){e.next=11;break}e.t2=n,e.next=12;break;case 11:e.t2=void 0;case 12:e.t0=e.t2;case 13:return r=e.t0,e.next=16,this.baseContainer.apiClient.anonymousUserPromotionCode(this.sessionType,r);case 16:return o=e.sent,i=o.promotion_code,a="https://authgear.com/login_hint?type=anonymous&promotion_code=".concat(encodeURIComponent(i)),e.next=21,this.authorizeEndpoint(Bo({},t,{prompt:"login",loginHint:a}));case 21:s=e.sent,window.location.href=s;case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.finishAuthentication=function(){var e=x(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.baseContainer._finishAuthentication(window.location.href));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.finishReauthentication=function(){var e=x(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.baseContainer._finishReauthentication(window.location.href));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.finishPromoteAnonymousUser=function(){var e=x(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.baseContainer._finishAuthentication(window.location.href));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.openURL=function(){var e=x(O.mark((function e(t,n){var r,o,i,a,s,u,c;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new URL(t),o=r.searchParams,null!=(null==n?void 0:n.uiLocales)&&o.set("ui_locales",n.uiLocales.join(" ")),r.search="?"+o.toString(),i=r.toString(),"refresh_token"!==this.sessionType){e.next=19;break}return e.next=8,this.tokenStorage.getRefreshToken(this.name);case 8:if(a=e.sent){e.next=11;break}throw new g("refresh token not found");case 11:return e.next=13,this.baseContainer.apiClient.appSessionToken(a);case 13:return s=e.sent,u=s.app_session_token,c="https://authgear.com/login_hint?type=app_session_token&app_session_token=".concat(encodeURIComponent(u)),e.next=18,this.authorizeEndpoint({redirectURI:i,prompt:"none",responseType:"none",loginHint:c});case 18:i=e.sent;case 19:null!=n&&n.openInSameTab?window.location.href=i:window.open(i,"_blank");case 20:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.open=function(){var e=x(O.mark((function e(t,n){var r,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=this.baseContainer.apiClient.endpoint)){e.next=3;break}throw new g("Endpoint cannot be undefined, please double check whether you have run configure()");case 3:return o=r.replace(/\/$/,""),e.next=6,this.openURL("".concat(o).concat(t),n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.logout=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={redirectURI:""}),t.redirectURI){e.next=3;break}throw new g("missing redirect uri");case 3:e.t0=this.sessionType,e.next="cookie"===e.t0?6:"refresh_token"===e.t0?9:12;break;case 6:return e.next=8,this._logoutCookie(t);case 8:case 11:return e.abrupt("break",12);case 9:return e.next=11,this._logoutRefreshToken(t);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.authenticateAnonymously=function(){var e=x(O.mark((function e(){var t,n,r,o,i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=this.clientID)){e.next=3;break}throw new g("missing client ID");case 3:n=this.sessionType,e.t0=this.sessionType,e.next="cookie"===e.t0?7:"refresh_token"===e.t0?13:27;break;case 7:return e.next=9,this.baseContainer.apiClient.signupAnonymousUserWithoutKey(t,n,void 0);case 9:return e.next=11,this.baseContainer.apiClient._oidcUserInfoRequest();case 11:return r=e.sent,e.abrupt("return",{userInfo:r});case 13:return e.next=15,this.tokenStorage.getRefreshToken(this.name);case 15:return o=e.sent,e.next=18,this.baseContainer.apiClient.signupAnonymousUserWithoutKey(t,n,null!=o?o:void 0);case 18:if(i=e.sent){e.next=21;break}throw new g("unexpected empty token response");case 21:return e.next=23,this.baseContainer._persistTokenResponse(i,"AUTHENTICATED");case 23:return e.next=25,this.baseContainer.apiClient._oidcUserInfoRequest(i.access_token);case 25:return a=e.sent,e.abrupt("return",{userInfo:a});case 27:throw new g("unknown session type");case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._logoutRefreshToken=function(){var e=x(O.mark((function e(t){var n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenStorage.getRefreshToken(this.name);case 2:if(e.t0=n=e.sent,null==e.t0){e.next=7;break}e.t1=n,e.next=8;break;case 7:e.t1="";case 8:if(""===(r=e.t1)){e.next=21;break}return e.prev=10,e.next=13,this.baseContainer.apiClient._oidcRevocationRequest(r);case 13:e.next=19;break;case 15:if(e.prev=15,e.t2=e.catch(10),t.force){e.next=19;break}throw e.t2;case 19:return e.next=21,this.baseContainer._clearSession("LOGOUT");case 21:return e.next=23,this._redirectToEndSessionEndpoint(t.redirectURI);case 23:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}(),t._logoutCookie=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._redirectToEndSessionEndpoint(t.redirectURI);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._redirectToEndSessionEndpoint=function(){var e=x(O.mark((function e(t){var n,r,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.clientID){e.next=3;break}throw new g("missing client ID");case 3:return e.next=5,this.baseContainer.apiClient._fetchOIDCConfiguration();case 5:n=e.sent,r=new Tp,t&&r.append("post_logout_redirect_uri",t),o="".concat(n.end_session_endpoint,"?").concat(r.toString()),window.location.href=o;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.authorizeEndpoint=function(){var e=x(O.mark((function e(t){var n,r,o,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(null!=(n=t.responseType)?n:"cookie"===this.sessionType)?"none":"code",o="cookie"===this.sessionType?["openid","https://authgear.com/scopes/full-access"]:["openid","offline_access","https://authgear.com/scopes/full-access"],i="refresh_token"===this.sessionType,e.abrupt("return",this.baseContainer.authorizeEndpoint(Bo({},t,{responseType:r,scope:o,suppressIDPSessionCookie:i})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.makeAuthorizeURL=function(){var e=x(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.authorizeEndpoint(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.fetchUserInfo=function(){var e=x(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshAccessTokenIfNeeded();case 2:return e.abrupt("return",this.baseContainer.apiClient._oidcUserInfoRequest("cookie"===this.sessionType?void 0:null!=(t=this.accessToken)?t:""));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.refreshAccessToken=function(){var e=x(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.baseContainer._refreshAccessToken();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.refreshAccessTokenIfNeeded=function(){var e=x(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.baseContainer.refreshAccessTokenIfNeeded());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.fetch=function(){var e=x(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.baseContainer.fetch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),s(e,[{key:"name",get:function(){return this.baseContainer.name},set:function(e){this.baseContainer.name=e}},{key:"clientID",get:function(){return this.baseContainer.clientID},set:function(e){this.baseContainer.clientID=e}},{key:"sessionState",get:function(){return this.baseContainer.sessionState},set:function(e){this.baseContainer.sessionState=e}},{key:"accessToken",get:function(){return this.baseContainer.accessToken},set:function(e){this.baseContainer.accessToken=e}}]),e}(),Fp=new qp})),i.register("gsgdM",(function(t,r){e(t.exports,"default",(()=>l));var o=i("f2jpS"),a=i("16H8x"),s=i("8pd89"),u=i("1KZzU"),c=i("6CRgC");const f=(0,s.makeStyles)({background:{backgroundColor:u.tokens.colorNeutralBackground2}});function l(){const e=f();return(0,o.jsx)("div",{className:n(a)(n(c).root,e.background),children:(0,o.jsx)(s.Text,{as:"h1",block:!0,size:900,children:"Signup/Login to Authgear Example..."})})}})),i.register("6CRgC",(function(t,n){var r;e(t.exports,"root",(()=>r),(e=>r=e)),r="oX2nyW_root"})),i.register("edJOl",(function(t,n){e(t.exports,"UserInfoContext",(()=>s)),e(t.exports,"UserInfoContextProvider",(()=>u));var r=i("f2jpS"),o=i("49uSp"),a=i("6jYnC");const s=(0,o.createContext)({userInfo:null,setUserInfo:()=>{}});function u(e){const[t,n]=(0,o.useState)(null),i=(0,o.useCallback)((()=>{a.default.fetchUserInfo().then((e=>n(e)),(e=>console.error(e)))}),[]);(0,o.useEffect)((()=>{a.default.delegate={onSessionStateChange:e=>{"AUTHENTICATED"!==e.sessionState&&n(null),"AUTHENTICATED"===e.sessionState&&i()}},"AUTHENTICATED"===a.default.sessionState&&i()}),[i]);const{children:u}=e,c=(0,o.useMemo)((()=>({userInfo:t,setUserInfo:n})),[t]);return(0,r.jsx)(s.Provider,{value:c,children:u})}})),i.register("bl1vI",(function(e,t){e.exports=Promise.all([i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("eKcZ9")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("iLxlu")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("l8Tdg")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("44LDs")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("jEke0")),i("TZidP")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("cs5d8")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("gOaks"))]).then((()=>i("kBpn4")))})),i.register("1QoKS",(function(e,n){var r=i("cTlOj");e.exports=r((function(e){return new Promise((function(n,r){var o="i".concat((""+Math.random()).slice(2));t[o]=function(e){n(e),i()};var i=function(){delete t[o],a.onerror=null,a.remove()},a=document.createElement("script");a.async=!0,a.type="module",a.charset="utf-8",a.textContent="import * as m from '".concat(e,"'; ").concat(o,"(m);"),a.onerror=function(e){r(e),i()},document.head.appendChild(a)}))}))})),i.register("cTlOj",(function(e,t){var n={},r={},o={};function i(e){switch(e){case"preload":return r;case"prefetch":return o;default:return n}}e.exports=function(e,t){return function(n){var r=i(t);return r[n]?r[n]:r[n]=e.apply(null,arguments).catch((function(e){throw delete r[n],e}))}}})),i.register("i28il",(function(t,n){var r;e(t.exports,"getBundleURL",(()=>r),(e=>r=e));var o={};function i(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(e){var t=o[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return i(e[2])}return"/"}(),o[e]=t),t}})),i.register("TZidP",(function(e,t){var n=i("cTlOj");e.exports=n((function(e){return new Promise((function(t,n){var r=document.getElementsByTagName("link");if([].concat(r).some((function(t){return t.href===e&&t.rel.indexOf("stylesheet")>-1})))t();else{var o=document.createElement("link");o.rel="stylesheet",o.href=e,o.onerror=function(e){o.onerror=o.onload=null,o.remove(),n(e)},o.onload=function(){o.onerror=o.onload=null,t()},document.getElementsByTagName("head")[0].appendChild(o)}}))}))})),i.register("44uH3",(function(e,t){e.exports=Promise.all([i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("3dfY4")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("eKcZ9")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("iLxlu")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("l8Tdg")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("44LDs")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("jEke0")),i("TZidP")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("ij15J")),i("1QoKS")(i("i28il").getBundleURL("fOdjO")+i("iQuBN").resolve("cyZ4Y"))]).then((()=>i("ahliS")))})),i("iQuBN").register(JSON.parse('{"fOdjO":"index.89d5afc8.js","gOaks":"Root.8cf6a332.js","6hwoV":"logo.501e9ccb.svg","cs5d8":"Root.840eb9fc.css","jEke0":"classnames.c458918f.js","44LDs":"react.4f9c6ef6.js","l8Tdg":"react-components.26b9db83.js","iLxlu":"react-theme.37101700.js","eKcZ9":"react-dom.78343c51.js","cyZ4Y":"OAuthRedirect.7f63bd5f.js","ij15J":"index.aebf41d8.css","3dfY4":"react-router-dom.15c9c6be.js"}'));var a=i("f2jpS"),s=i("8HT7i"),u=(a=i("f2jpS"),i("49uSp")),c=i("8pd89"),f=i("eh9sX"),l=i("6jYnC"),p=i("gsgdM");u=i("49uSp"),l=i("6jYnC");function h(e){const{children:t,fallback:n}=e,r="AUTHENTICATED"===l.default.sessionState,o=window.location.origin+"/oauth-redirect";return(0,u.useEffect)((()=>{r||l.default.startAuthentication({redirectURI:o,prompt:"login"}).catch((e=>{console.error(e)}))}),[r,o]),r?null!=t?t:null:n}var d=i("edJOl");const v=(0,(u=i("49uSp")).lazy)((async()=>i("bl1vI"))),y=(0,u.lazy)((async()=>i("44uH3")));function g(){return(0,u.useEffect)((()=>{const e=document.querySelector("meta[name=insertion-point]"),t=[];for(let e=0;e<document.head.children.length;e++){const n=document.head.children[e];n instanceof HTMLLinkElement&&"stylesheet"===n.rel&&t.push(n)}for(const n of t)document.head.insertBefore(n,e)}),[]),(0,a.jsx)(f.BrowserRouter,{children:(0,a.jsxs)(f.Routes,{children:[(0,a.jsx)(f.Route,{index:!0,element:(0,a.jsx)(u.Suspense,{fallback:(0,a.jsx)(p.default,{}),children:(0,a.jsx)(h,{fallback:(0,a.jsx)(p.default,{}),children:(0,a.jsx)(v,{})})})}),(0,a.jsx)(f.Route,{path:"/oauth-redirect",element:(0,a.jsx)(u.Suspense,{fallback:(0,a.jsx)(p.default,{}),children:(0,a.jsx)(y,{})})})]})})}(0,s.render)((0,a.jsx)((function(){const[e,t]=(0,u.useState)(!1),[n,r]=(0,u.useState)(null);return(0,u.useEffect)((()=>{(async function(){await l.default.configure({clientID:"d321882915f13d03",endpoint:"https://demo-authgear-website.authgearapps.com"})})().then((()=>t(!0)),(e=>{r(e),console.error(e)}))}),[]),null!=n?(0,a.jsx)("pre",{children:JSON.stringify(n)}):e?(0,a.jsx)(c.FluentProvider,{theme:c.webLightTheme,children:(0,a.jsx)(d.UserInfoContextProvider,{children:(0,a.jsx)(g,{})})}):(0,a.jsx)(p.default,{})}),{}),document.getElementById("react-app-root"));
//# sourceMappingURL=index.89d5afc8.js.map
